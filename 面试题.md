# java基础及源码

1. java泛型的好处

   确保编译期的类型安全，编译器在编译时擦除了所有类型相关的信息，所以在运行时不存在任何类型相关的信息。比如List<String>运行时就是 List

2. arrayList

   默认10，一次扩容1.5倍，ArrayList 实现了 writeObject() 和 readObject() 来控制只序列化数组中有元素填充那部分内容。vector每次增长两倍

3. Transient 关键字

   被修饰的字段不会被序列化
   
4. synchronized与ReentrantLock比较

   1. 锁实现方式：synchronized是jvm实现；ReentrantLock是JDK实现
   2. 性能相差不多
   3. 等待可中断ReentrantLock可以，synchronized不行
   4. 公平锁：ReentrantLock默认非公平。synchronized非公平

5. 并发很多，如果控制每次并发只有限制数

   使用Semaphore信号量设置限制数

6. 异步转同步方法？多个线程等待等线程到达时执行的方法？

   CountDownLatch，CyclicBarrier

7. java内存模型的意义？

   Java 内存模型试图屏蔽各种硬件和操作系统的内存访问差异，以实现让 Java 程序在各种平台下都能达到一致的内存访问效果。

8. 内存三大特性

   原子性、可见性、有序性

9. 什么是锁消除?

   锁消除是指对于被检测出不可能存在竞争的共享数据的锁进行消除。

   ```java
   public static String concatString(String s1, String s2, String s3) {
       StringBuffer sb = new StringBuffer();
       sb.append(s1);
       sb.append(s2);
       sb.append(s3);
       return sb.toString();
   }
   ```

   每个 append() 方法中都有一个同步块。虚拟机观察变量 sb，很快就会发现它的动态作用域被限制在 concatString() 方法内部。也就是说，sb 的所有引用永远不会逃逸到 concatString() 方法之外，其他线程无法访问到它，因此可以进行消除。

# Redis

1. redis为什么是key，value的，为什么不是支持SQL的？

2. redis是多线程还是单线程？

   单线程指的是网络请求模块使用了一个线程，其他模块用了多个线程。

3. redis的持久化开启了RDB和AOF下重启服务是如何加载的？(10个人9个回答错误)

   混合持久，aof日志存放持久化开始到结束增量，重启先加载rdb在重放aof

4. redis如果做集群该如何规划？AKF/CAP如何实现和设计？

5. 10万用户一年365天的登录情况如何用redis存储，并快速检索任意时间窗内的活跃用户？

   使用位图，bitcount key 可以统计签到天数,使用bitpos key 0|1查看该数字从第几个开始即签到开始时间

6. redis的5种Value类型你用过几种，能举例吗？

7. 100万并发4G数据，10万并发400G数据，如何设计Redis存储方式？

8. redis cluster集群方案一共分为多少个槽。采用什么hash算法？

   16384个槽，采用CRC16然后对16384取模

# MQ



# 设计模式



# 多线程



# 高并发



# spring相关源码



# jvm



# nio



# 算法



# 最终一致性